# 贡献工作流程说明

## 🔄 完整工作流程

### 方式一：使用 easy_pr.py 脚本（推荐）

```
┌─────────────────────────────────────────────────────────────┐
│  1. Fork仓库                                                 │
│     https://github.com/victkk/FDU-Sharing → Fork           │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  2. 克隆你的Fork                                             │
│     git clone https://github.com/你的用户名/FDU-Sharing.git │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  3. 准备资料                                                 │
│     将文件放入 upload/ 目录                                  │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  4. 运行脚本                                                 │
│     python scripts/easy_pr.py                               │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  5. 按提示操作                                               │
│     - 选择文件                                               │
│     - 配置课程和类型                                         │
│     - 确认操作                                               │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  6. 自动创建PR                                               │
│     脚本会推送到你的fork并创建PR到上游仓库                   │
└─────────────────────────────────────────────────────────────┘
```

### 方式二：手动提交

如果你不想使用脚本，可以手动操作：

```bash
# 1. Fork并克隆（同上）

# 2. 创建分支
git checkout -b add/课程名-资料

# 3. 手动添加文件
# - 放入 public/resources/课程名/
# - 编辑 pages/courses/拼音名.mdx

# 4. 提交
git add .
git commit -m "添加：课程名 - 资料描述"

# 5. 推送到你的fork
git push origin add/课程名-资料

# 6. 在GitHub上创建PR
# 访问你的fork，点击 "Compare & pull request"
```

## 🚨 常见错误

### 错误1: "当前仓库不是fork"

**原因**: 你直接克隆了原仓库，而不是你的fork

**解决**:
1. 在GitHub上Fork仓库
2. 克隆你的fork（不是原仓库）
3. 重新运行脚本

### 错误2: "No commits between master and xxx"

**原因**: 试图在同一仓库的分支间创建PR

**解决**: 确保你在fork中工作，PR应该从你的fork到上游仓库

### 错误3: "permission denied"

**原因**: 没有推送到远程仓库的权限

**解决**:
1. 确认你在自己的fork中工作
2. 检查Git认证配置
3. 运行 `gh auth login` 重新认证

## 💡 理解Fork工作流

```
上游仓库 (victkk/FDU-Sharing)
    ↓ Fork
你的Fork (你的用户名/FDU-Sharing)
    ↓ Clone
本地仓库 (你的电脑)
    ↓ Push
你的Fork (你的用户名/FDU-Sharing)
    ↓ Pull Request
上游仓库 (victkk/FDU-Sharing)
```

**关键点**:
- ✅ 你只能推送到你自己的fork
- ✅ PR是从你的fork到上游仓库
- ❌ 不能直接推送到上游仓库（除非你是维护者）

## 🔧 检查你的仓库状态

```bash
# 查看远程仓库
git remote -v

# 应该看到：
# origin  https://github.com/你的用户名/FDU-Sharing.git (fetch)
# origin  https://github.com/你的用户名/FDU-Sharing.git (push)

# 如果看到 victkk/FDU-Sharing，说明你克隆的是原仓库！

# 检查是否是fork
gh repo view --json isFork -q .isFork
# 应该返回 true
```

## 📞 需要帮助？

如果遇到问题：
1. 查看本文档的常见错误部分
2. 查看主README的FAQ

